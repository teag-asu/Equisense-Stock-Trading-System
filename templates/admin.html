<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EquiSense - Admin Panel</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <style>
    /* Inline admin link styles to ensure they work */
    .admin-link {
      display: block !important;
      padding: 0.6em 1em !important;
      background: #1e2a38 !important;
      color: #fff !important;
      text-decoration: none !important;
      border-radius: 4px !important;
      margin: 0.5em 0 !important;
      transition: background-color 0.3s ease !important;
      text-align: center !important;
      font-weight: bold !important;
    }
    .admin-link:hover {
      background: #33475b !important;
      color: #fff !important;
    }
    .panel ul li {
      list-style: none !important;
      margin: 0 !important;
      padding: 0 !important;
    }
    .panel ul {
      padding: 0 !important;
      margin: 0 !important;
    }
  </style>
</head>
<body>
  <header>
    <h1>EquiSense</h1>
    <nav>
      <ul>
        <li><a href="{{ url_for('login') }}">Login</a></li>
        <li><a href="{{ url_for('dashboard', user_id=1) }}">Trading Dashboard</a></li>
        <li><a href="{{ url_for('login') }}">Admin Panel</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="panel">
      <h2>Administrator Panel</h2>
      <ul>
        <li><a href="{{ url_for('admin_stock_create') }}" class="admin-link">Create New Stock</a></li>
        <li><a href="{{ url_for('admin_market_hours') }}" class="admin-link">Change Market Hours</a></li>
        <li><a href="{{ url_for('admin_market_schedule') }}" class="admin-link">Set Market Schedule</a></li>
        <li><a href="{{ url_for('admin_logs') }}" class="admin-link">View System Logs/Notifications</a></li>
        <li><a href="{{ url_for('admin_users') }}" class="admin-link">Manage Users</a></li>
        <li><a href="{{ url_for('admin_stocks') }}" class="admin-link">View All Stocks</a></li>
        <li><a href="{{ url_for('admin_stock_update') }}" class="admin-link">Update Stock Prices</a></li>
        <li><a href="{{ url_for('admin_settings') }}" class="admin-link">System Settings</a></li>
      </ul>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 EquiSense</p>
  </footer>
</body>
</html> -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EquiSense - Admin Panel</title>

  <!-- INLINE CSS -->
  <style>
    /* Base */
    *{margin:0;padding:0;box-sizing:border-box;font-family:Arial, sans-serif}
    body{background:#f4f4f4;color:#333}
    header{background:#1e2a38;color:#fff;padding:1em;text-align:center}
    header h1{margin-bottom:.5em}
    nav ul{list-style:none;display:flex;justify-content:center;gap:1em}
    nav a{color:#fff;text-decoration:none}
    main{padding:2em}
    footer{text-align:center;padding:1em;background:#1e2a38;color:#fff;margin-top:2em}

    /* Panel */
    .panel{background:#fff;padding:1.5em;margin-bottom:2em;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,.1)}
    .panel ul{padding:0;margin:0}
    .panel ul li{list-style:none;margin:0;padding:0}

    /* Two-column grid for admin actions */
    .admin-grid{
      display:grid;
      grid-template-columns:repeat(2,minmax(240px,1fr));
      gap:1rem 1.25rem;
      margin-top:1rem;
    }

    /* Admin action card links */
    .admin-link{
      display:block;
      padding:.85em 1em;
      background:#1e2a38;
      color:#fff!important;
      text-decoration:none!important;
      border-radius:8px;
      text-align:center;
      font-weight:700;
      transition:transform .06s ease, background-color .2s ease, box-shadow .2s ease;
      box-shadow:0 1px 3px rgba(0,0,0,.08);
    }
    .admin-link:hover{
      background:#2a3b50;
      box-shadow:0 2px 8px rgba(0,0,0,.12);
      transform:translateY(-1px);
      color:#fff!important;
    }
    .admin-link:active{transform:translateY(0)}

    /* Flash (optional if you use flash messages here) */
    .flash-messages{margin:1em auto;max-width:600px;text-align:center}
    .flash{padding:10px 15px;margin:10px 0;border-radius:6px;font-weight:500}
    .flash.success{background:#d4edda;color:#155724;border:1px solid #c3e6cb}
    .flash.error{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}

    /* Modal dialog */
    /* Center the dialog itself even in non-showModal fallback */
dialog.modal[open] {
  position: fixed;
  inset: 0;         /* top:0 right:0 bottom:0 left:0 */
  margin: auto;     /* centers the dialog box */
}

/* Modal box sizing */
dialog.modal{
  width: 92vw;
  max-width: 1000px;
  border: none;
  border-radius: 10px;
  padding: 0;
  overflow: hidden;
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
}

/* Center the iframe inside the modal */
.modal-body{
  background:#fff;
  height: min(80vh, 760px);
  padding: 0;
  display: flex;                  /* ⬅ key */
  align-items: center;            /* ⬅ vertical center */
  justify-content: center;        /* ⬅ horizontal center */
}

/* Iframe sizing; stays centered */
#modalFrame{
  display: block;
  border: 0;
  width: min(960px, 90vw);
  height: min(72vh, 700px);
  border-radius: 6px;             /* optional: soften iframe edges */
  background: #fff;
}


    /* Responsive */
    @media (max-width:720px){.admin-grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <h1>EquiSense</h1>
    <nav>
      <ul>
        <li><a href="{{ url_for('login') }}">Login</a></li>
        {# <li><a href="{{ url_for('dashboard', user_id=user_id if 'user_id' in globals() else 1) }}">Trading Dashboard</a></li> #}

        <a href="{{ url_for('dashboard', user_id=1) }}">Trading Dashboard</a>

        <li><a href="{{ url_for('admin') }}">Admin Panel</a></li>
      </ul>
    </nav>
  </header>

  <main>
    {# Optional flash area #}
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash-messages">
          {% for category, message in messages %}
            <div class="flash {{ category }}">{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <section class="panel">
      <h2>Administrator Panel</h2>
      <ul class="admin-grid">
        <li><a href="{{ url_for('admin_stock_create') }}" class="admin-link" data-modal-title="Create New Stock">Create New Stock</a></li>
        <li><a href="{{ url_for('admin_market_hours') }}" class="admin-link" data-modal-title="Change Market Hours">Change Market Hours</a></li>
        <li><a href="{{ url_for('admin_market_schedule') }}" class="admin-link" data-modal-title="Set Market Schedule">Set Market Schedule</a></li>
        <li><a href="{{ url_for('admin_logs') }}" class="admin-link" data-modal-title="System Logs & Notifications">View System Logs/Notifications</a></li>
        <li><a href="{{ url_for('admin_users') }}" class="admin-link" data-modal-title="Manage Users">Manage Users</a></li>
        <li><a href="{{ url_for('admin_stocks') }}" class="admin-link" data-modal-title="All Stocks">View All Stocks</a></li>
        <li><a href="{{ url_for('admin_stock_update') }}" class="admin-link" data-modal-title="Update Stock Prices">Update Stock Prices</a></li>
        <li><a href="{{ url_for('admin_settings') }}" class="admin-link" data-modal-title="System Settings">System Settings</a></li>
      </ul>
    </section>

    <!-- Modal -->
    <dialog id="adminModal" class="modal">
      <div class="modal-header">
        <h3 id="modalTitle">Loading…</h3>
        <button class="modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body">
        <iframe id="modalFrame" title="Admin Tool" loading="lazy"></iframe>
      </div>
    </dialog>
  </main>

  <footer>
    <p>&copy; 2025 EquiSense</p>
  </footer>

  <!-- Minimal JS to load admin routes inside modal -->
  <script>
    (function () {
      const modal = document.getElementById('adminModal');
      const frame = document.getElementById('modalFrame');
      const titleEl = document.getElementById('modalTitle');
      const closeBtn = modal.querySelector('.modal-close');

      function openModal(href, titleText) {
        titleEl.textContent = titleText || 'Admin Tool';
        frame.src = href;
        if (typeof modal.showModal === 'function') {
          modal.showModal();
        } else {
          modal.setAttribute('open', 'open'); // fallback
        }
      }

      function closeModal() {
        frame.src = 'about:blank';
        if (typeof modal.close === 'function') {
          modal.close();
        } else {
          modal.removeAttribute('open');
        }
      }

      // Intercept clicks on admin links
      document.addEventListener('click', function (e) {
        const link = e.target.closest('a.admin-link');
        if (!link) return;

        // allow new tab / modifiers
        if (e.metaKey || e.ctrlKey || e.shiftKey || e.button === 1) return;

        e.preventDefault();
        openModal(link.getAttribute('href'), link.getAttribute('data-modal-title'));
      });

      // Close handlers
      closeBtn.addEventListener('click', closeModal);
      modal.addEventListener('cancel', (e) => { e.preventDefault(); closeModal(); }); // ESC
      modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); }); // backdrop
    })();
  </script>
</body>
</html>

